<!DOCTYPE html>
<meta charset="utf-8">
<head>
    <meta name="copyright" content="&copy; 2014 Bradley Alan Smith" />
    <title>Container Widget</title>
    
    <link rel='stylesheet' href='//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/base.css'>
    <link rel='stylesheet' href='//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.css'>
    <link rel='stylesheet' href='//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/pure.css'>
    
    <link rel="stylesheet" href="../../base/base.css" />
    <link rel="stylesheet" href="../../menutree/menutree.css" />
    <link rel="stylesheet" href="../../resultviewer/resultviewer.css" />
    <link rel="stylesheet" href="../../../layout/layout.css" />
    <link rel="stylesheet" href="../container.css" />
    
    <style>
        #left { 
            background: purple;
        }
        
        #right {
            background: green;
        }
        
        #menu {
            margin: 1em;
        }
        
        #shoutout {
            margin: 3em;
        }
    </style>
    
    <script src="http://d3js.org/d3.v3.js"></script>
    <script src="../../menutree/d3.layout.indent.js"></script>
    <script src="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore.js"></script>
    <script src="../../../layout/layout.js"></script>
    <script src="../../base/base.js"></script>
    <script src="../../menutree/menutree.js"></script>
    
    <script src="../../resultviewer/resultviewer.js"></script>
    <script src="../container.js"></script>
    
</head>
<body>

    <script>


var doc = [
    {
        'id':'left',
        'widget':'Container',
        'browserview':{
                'width':'15%',
                'height':'100%',
            },
        'children':[
            {
                'id':'cont_type_selector',
                'widget':'Container'
            },
            {
                'id':'menu',
                'widget':'MenuTree',
                'nest':[
                    function(d) { return d.parent_objid; },
                    function(d) { return d.parent_objid + " " + d.entitytype; },
                ]
            }
        ]
    },
    {
        'id':'right',
        'widget':'Container',
        'browserview':{
                'width':'85%',
                'height':'100%',
                'containermode':'tabs'
            },
        'children':[
            {
                'id':'shoutout',
                'widget':'Container',
            },
            {
                'id':'results',
                'widget':'ResultViewer'
            }
        ]
    }
]

Layout.init(doc)


d3.select('#shoutout').append('h1').text('FUNNY MAN LIVE SHORT LIFE')


Layout.update()

menu = Layout.registry.menu
results = Layout.registry.results

menu.on_click = function (d) {
    results.clear()
    if (d.entitytype == 'Table' || d.entitytype == 'View') {
        d3.json('../resultviewer/examples/example.json',function (e,d) {
            results.update(e,d)
        })
    }
}

d3.json('../../resultviewer/examples/example.json',function (e,d) {
    results.update(e,d)
})
d3.json('../../menutree/examples/layers.json',function (e,d) {
    menu.update(e,d)
    Layout.update()
})
    
    </script>
    
</body>
